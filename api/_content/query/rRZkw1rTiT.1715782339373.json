{"_path":"/projects/breadboard-gpu","_dir":"projects","_draft":false,"_partial":false,"_locale":"","title":"Breadboard GPU","description":"Breadboard graphics processing unit based on the Ben Eater's graphics card series on youtube.","thumbnail":"/images/projects/gpu/thumbnail.webp","technologies":["Circuit Design","Arduino","C++"],"assets":"/images/projects/gpu","showcased":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":""},"children":[{"type":"element","tag":"binding","props":{"value":"title"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"project-description"},"children":[{"type":"text","value":"Project Description"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This was a project that I decided to do on a whim during my summer break over 2021 after complete a digital circuits course in university. It is a breadboard computer that was build following the guidance of youtuber Ben Eater and his homemade graphics card series."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It was a great way for learning the subtle intricacies of electronics engineering and also learning how to interpret datasheets."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In case you would like to check out his series below,\n"},{"type":"element","tag":"youtube-embed","props":{"src":"https://www.youtube.com/embed/l7rce6IQDWs?si=UXNcpmVq3vdGLPMx"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This project involved extensive use of breadboards, digital circuits, and datasheets for different components."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The main technologies used in this project included TTL ICs, diodes, capacitors, resistors, and most importantly, a VGA connector for output. I also utilized C++ for generating writing my own naïve graphics API and other necessary digital logic."}]},{"type":"element","tag":"h2","props":{"id":"technologies-used"},"children":[{"type":"text","value":"Technologies Used"}]},{"type":"element","tag":"blog-technologies","props":{":tags":"technologies"},"children":[]},{"type":"element","tag":"h2","props":{"id":"features"},"children":[{"type":"text","value":"Features"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The graphics card I decided to build was slightly different to the one from Ben Eater mainly because I wanted to challenge myself and test my overall understanding of the content."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Namely the key differences will be:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Feature"}]}]},{"type":"element","tag":"th","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Ben Eater"}]}]},{"type":"element","tag":"th","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Mine"}]}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Resolution"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"100:75"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"200:150"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"VRam Type"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"EEPROM (AT28C256)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SRAM (AS6C1008-55PCN)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Framebuffer"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Single buffered"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Double buffered"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Colour Range"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"64 colours"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4096 colours"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"CPU Type"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"W65C02S 8–bit Microprocessor"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"ATMEGA1284-PU Microcontroller"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"CPU Access"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"During blanking intervals"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"No restrictions"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Breadboard Type"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Solderless"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Soldered"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"timing-circuitry"},"children":[{"type":"text","value":"Timing Circuitry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By following Ben Eater’s guide, I was quickly able to build the breadboard setup for displaying simple RGB bands on the monitor."}]},{"type":"element","tag":"h2","props":{"id":"vram-circuitry"},"children":[{"type":"text","value":"VRAM Circuitry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A huge limitation in Ben Eater's design was that the EEPROM only had 15 address lines and hence, the maximum supported resolution was 100 x 75. In addition, his graphics card can only render 64 different colours. Because I wanted to render games on my GPU, I opted to use the AS6C1008-55PCN- 1Mbit instead of an EEPROM with for a final resolution of 200 x 150 and 4096 supported colours."}]},{"type":"element","tag":"h2","props":{"id":"driver"},"children":[{"type":"text","value":"Driver"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The main computing unit for this graphics card was ATMEGA1284-PU microcontroller the reason for this was due to it having 32 GPIO pins in which I would need 16 for the address, 12 for I/O and 1 to control which SRAM is in read/write mode."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Initially the main bottleneck was the digital write function being too slow for my needs since they only operated on one pin at a time and performed checks on the input. As such, I will be writing my own C function to accomplish the task with zero overhead using port manipulation. This allowed me to dramatically improve the time to write from 2.24us for a single bit to 23ns for 8 bits in parallel."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In case you wanted to know, this is what the code was:"}]},{"type":"element","tag":"pre","props":{"className":"language-c shiki shiki-themes github-light github-dark","code":"void writeToBuffer(uint16_t addr, uint16_t word) {\n    PORTB = addr >> 8; // Higher Addr Bytes\n    PORTA = addr & 0xFF; // Lower Addr Bytes\n    PORTC = (word >> 8) & 0b00111111;\n    PORTD = word & 0xFF;\n}\n","language":"c","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" writeToBuffer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"uint16_t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E36209;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":" addr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"uint16_t"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E36209;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":" word"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    PORTB "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" addr "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" 8"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":" // Higher Addr Bytes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    PORTA "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" addr "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":" 0x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"FF"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":" // Lower Addr Bytes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    PORTC "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" (word "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" 8"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":" 0b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"00111111"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    PORTD "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" word "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":" 0x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"FF"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that I am setting the upper bytes first to avoid corrupting addresses in the SRAM."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since I was really into Tetris at the time, I thought it would be a cool idea to implement that as a playable game."}]},{"type":"element","tag":"h2","props":{"id":"results"},"children":[{"type":"text","value":"Results"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Although, due to time and financial constraints, I had to halt development on the project. However, I plan to resume it someday, possibly after graduating from university when I might have a few more electrical circuit design tricks up my sleeve to streamline the process. Alternatively, I may choose to redo the project using proper PCBs instead of breadboards. Despite the abrupt halt, I was quite pleased with the progress I made in just a few weeks, especially considering I was a beginner in electronics engineering.\n"},{"type":"element","tag":"blog-img","props":{"src":"/images/projects/gpu/tetris.PNG"},"children":[]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"project-description","depth":2,"text":"Project Description"},{"id":"technologies-used","depth":2,"text":"Technologies Used"},{"id":"features","depth":2,"text":"Features"},{"id":"timing-circuitry","depth":2,"text":"Timing Circuitry"},{"id":"vram-circuitry","depth":2,"text":"VRAM Circuitry"},{"id":"driver","depth":2,"text":"Driver"},{"id":"results","depth":2,"text":"Results"}]}},"_type":"markdown","_id":"content:projects:3.breadboard-gpu.md","_source":"content","_file":"projects/3.breadboard-gpu.md","_extension":"md"}